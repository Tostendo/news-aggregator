{"version":3,"sources":["components/with-spinner/spinner.component.tsx","components/card/card.component.tsx","utils/date.utils.tsx","components/card-list/card-list.component.tsx","components/search-box/search-box.tsx","components/footer/footer.component.tsx","App.tsx","utils/server.utils.tsx","index.tsx"],"names":["Spinner","className","Card","props","target","rel","href","message","link","feed_name","title","author","dateString","d","Date","getDate","getMonth","getFullYear","err","console","error","formatDate","published","dangerouslySetInnerHTML","__html","summary","CardList","news","map","key","SearchBox","type","placeholder","onChange","handleSearch","Footer","App","e","setState","searchField","value","handleSelect","selected","selectedSources","getFilteredResults","state","length","selectedFeeds","source","filter","toLowerCase","includes","isLoading","filtered","allSources","fetch","then","response","json","label","catch","this","options","labelledBy","overrideStrings","selectSomeItems","allItemsAreSelected","selectAll","search","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.65a59c56.chunk.js","sourcesContent":["import React from \"react\";\n\nimport \"./spinner.styles.scss\";\n\nconst Spinner = () => (\n  <div className=\"spinner-overlay\">\n    <div className=\"spinner-container\"></div>\n  </div>\n);\n\nexport default Spinner;\n","import React from \"react\";\nimport \"./card.style.scss\";\nimport { formatDate } from \"../../utils/date.utils\";\nimport { FeedMessage } from \"../../types/message\";\n\ntype Props = {\n  message: FeedMessage;\n};\n\nexport const Card = (props: Props) => {\n  return (\n    <a\n      className=\"card-container\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      href={props.message.link}\n    >\n      <div className=\"feed-name\">{props.message.feed_name}</div>\n      <h2>{props.message.title}</h2>\n      <div className=\"card-meta\">\n        <span>{props.message.author}</span>\n        <span>{formatDate(props.message.published)}</span>\n      </div>\n      <p dangerouslySetInnerHTML={{ __html: props.message.summary }}></p>\n    </a>\n  );\n};\n","export const formatDate = (dateString: string) => {\n  try {\n    const d = new Date(dateString);\n    return d.getDate() + \".\" + (d.getMonth() + 1) + \".\" + d.getFullYear();\n  } catch (err) {\n    console.error(\"Could not parse date: \", err);\n    return dateString;\n  }\n};\n","import React from \"react\";\nimport { Card } from \"../card/card.component\";\n\nimport { FeedMessage } from \"../../types/message\";\n\nimport \"./card-list.style.scss\";\nexport const CardList = (props: { news: FeedMessage[] }) => {\n  return (\n    <div className=\"card-list\">\n      {props.news.map((message: any) => {\n        return <Card key={message.link} message={message} />;\n      })}\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"./search-box.style.scss\";\n\ntype Props = {\n  placeholder: string;\n  handleSearch: (event: React.ChangeEvent<HTMLInputElement>) => void;\n};\n\nexport const SearchBox = (props: Props) => {\n  return (\n    <div>\n      <input\n        className=\"search\"\n        type=\"search\"\n        placeholder={props.placeholder}\n        onChange={props.handleSearch}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport \"./footer.styles.scss\";\n\nconst Footer = () => (\n  <div className=\"footer\">\n    <span>\n      Icons erstellt von{\" \"}\n      <a href=\"https://www.flaticon.com/de/autoren/freepik\" title=\"Freepik\">\n        Freepik\n      </a>{\" \"}\n      from{\" \"}\n      <a href=\"https://www.flaticon.com/de/\" title=\"Flaticon\">\n        {\" \"}\n        www.flaticon.com\n      </a>\n    </span>\n  </div>\n);\n\nexport default Footer;\n","import React, { Component } from \"react\";\nimport MultiSelect from \"react-multi-select-component\";\nimport Spinner from \"./components/with-spinner/spinner.component\";\nimport { CardList } from \"./components/card-list/card-list.component\";\nimport { SearchBox } from \"./components/search-box/search-box\";\nimport Footer from \"./components/footer/footer.component\";\n\nimport { getServerUrl } from \"./utils/server.utils\";\n\nimport { FeedMessage } from \"./types/message\";\n\nimport \"./App.scss\";\n\ntype State = {\n  news: FeedMessage[];\n  filtered: FeedMessage[];\n  searchField: string;\n  isLoading: boolean;\n  allSources: { label: string; value: string }[];\n  selectedSources: { label: string; value: string }[];\n};\n\nclass App extends Component<{}, State> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      news: [],\n      filtered: [],\n      searchField: \"\",\n      allSources: [],\n      selectedSources: [],\n    };\n  }\n\n  componentDidMount() {\n    fetch(`${getServerUrl()}/api/feeds`)\n      .then((response) => response.json())\n      .then((news) =>\n        this.setState({\n          isLoading: false,\n          news: news[\"entries\"],\n          allSources: news[\"sources\"].map((source: string) => {\n            return {\n              label: source,\n              value: source.toLowerCase(),\n            };\n          }),\n        })\n      )\n      .catch((err) => {\n        this.setState({\n          isLoading: false,\n        });\n        console.error(err);\n      });\n  }\n\n  handleSearch = (e: any) => {\n    this.setState({\n      searchField: e.target.value,\n    });\n  };\n\n  handleSelect = (selected: any[]) => {\n    this.setState({\n      selectedSources: selected,\n    });\n  };\n\n  // FIXME(TO): This should be refactored soon.\n  getFilteredResults = () => {\n    const { news, searchField, selectedSources } = this.state;\n    if (!searchField && selectedSources.length === 0) {\n      return news;\n    }\n\n    const selectedFeeds = selectedSources.map((source) => source.value);\n\n    if (!searchField) {\n      return news.filter((message: FeedMessage) =>\n        selectedFeeds.includes(message.feed_name.toLowerCase())\n      );\n    }\n\n    if (selectedSources.length === 0) {\n      return news.filter((message: FeedMessage) => {\n        return (\n          message.title.toLowerCase().includes(searchField.toLowerCase()) ||\n          message.feed_name.toLowerCase().includes(searchField.toLowerCase())\n        );\n      });\n    }\n\n    return news.filter((message: FeedMessage) => {\n      return (\n        (message.title.toLowerCase().includes(searchField.toLowerCase()) ||\n          message.feed_name\n            .toLowerCase()\n            .includes(searchField.toLowerCase())) &&\n        selectedFeeds.includes(message.feed_name.toLowerCase())\n      );\n    });\n  };\n\n  render() {\n    const filtered = this.getFilteredResults();\n    return (\n      <div className=\"App\">\n        <h1>News Me</h1>\n        <div className=\"filters\">\n          <SearchBox\n            placeholder=\"Search news..\"\n            handleSearch={this.handleSearch}\n          />\n          <MultiSelect\n            options={this.state.allSources}\n            value={this.state.selectedSources}\n            onChange={this.handleSelect}\n            labelledBy={\"Select\"}\n            overrideStrings={{\n              selectSomeItems: \"Select feeds ...\",\n              allItemsAreSelected: \"All feeds are selected.\",\n              selectAll: \"Select All\",\n              search: \"Search\",\n            }}\n          />\n        </div>\n        {this.state.isLoading ? <Spinner /> : <CardList news={filtered} />}\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export const getServerUrl = () => {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"https://news-me-backend.herokuapp.com\";\n  } else {\n    return \"http://localhost:5000\";\n  }\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}